/*! ngFirewall v0.0.5 | https://github.com/coma/ngFirewall | MIT license */
!function(){var a=angular.module("ngFirewall",[]),b="/login",c={},d={},e=function(a,b,c){var d,e=null;for(d in c)if(new RegExp(d).test(b)){e=c[d];break}return null===e?!1:(e.constructor===String&&(e=[e]),e.constructor===Array?!e.some(function(b){return a.hasRole(b)}):e.constructor===Function?!e(a,b):!1)};a.provider("$auth",function(){var a=this;this.setLogoutPath=function(c){return b=c,a},this.setRouteFirewall=function(b){return c=b,a},this.setHTTPFirewall=function(b){return d=b,a},this.$get=[function(){}]}),a.service("$user",function(){var a=[];this.setRoles=function(b){a=b},this.hasRole=function(b){return a.indexOf(b)>-1},this.eraseRoles=function(){a=[]}}),a.config(["$provide","$httpProvider",function(a,b){a.factory("firewallInterceptor",["$q","$user",function(a,b){return{request:function(c){if(e(b,c.url,d)){var f=a.defer();c.timeout=f.promise,f.resolve()}return c||a.when(c)}}}]),b.interceptors.push("firewallInterceptor")}]),a.run(["$rootScope","$auth","$user","$location",function(a,d,f,g){a.$on("$locationChangeStart",function(a,d){var h=/[^#]#(.*)$/.exec(d);h=null===h?"":h.pop(),e(f,h,c)&&(f.eraseRoles(),g.path(b))})}])}();